(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{101:function(e,t,n){},102:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},220:function(e,t,n){"use strict";n.r(t);var c=n(5),a=n(0),r=n(47),s=n(42),i=n(55),o=(n(101),n.p+"static/media/mjolnir.61f31e18.png"),l=n(3),u=function(e){var t=e.data,n=t.name,c=t.description,a=t.thumbnail,r=t.homepage,s=t.wiki,i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?{objectFit:"contain"}:null;return Object(l.jsxs)("div",{className:"randomchar__block",children:[Object(l.jsx)("img",{src:a,alt:"Random character",style:i,className:"randomchar__img"}),Object(l.jsxs)("div",{className:"randomchar__info",children:[Object(l.jsx)("p",{className:"randomchar__name",children:n}),Object(l.jsx)("p",{className:"randomchar__descr",children:c}),Object(l.jsxs)("div",{className:"randomchar__btns",children:[Object(l.jsx)("a",{href:r,className:"button button__main",children:Object(l.jsx)("div",{className:"inner",children:"homepage"})}),Object(l.jsx)("a",{href:s,className:"button button__secondary",children:Object(l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=function(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],r=t[1],d=Object(s.a)(),j=d.getCharacter,h=d.clearError,b=d.process,m=d.setProcess;Object(a.useEffect)((function(){O()}),[]);var f=function(e){r(e)},O=function(){h();var e=Math.floor(400*Math.random()+1011e3);j(e).then(f).then((function(){return m("confirmed")}))};return Object(l.jsxs)("div",{className:"randomchar",children:[Object(i.a)(b,u,n),Object(l.jsxs)("div",{className:"randomchar__static",children:[Object(l.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(l.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(l.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(l.jsx)("button",{className:"button button__main",onClick:O,children:Object(l.jsx)("div",{className:"inner",children:"try it"})}),Object(l.jsx)("img",{src:o,alt:"mjolnir",className:"randomchar__decoration"})]})]})},j=n(69),h=n(217),b=n(8),m=function(e){var t=e.thumbnail,n=e.imgStyle,c=e.name,a=e.onCharSelected,r=e.onSetRef,s=e.onFocus;return Object(l.jsxs)("li",{ref:r,className:"char__item",onClick:a,tabIndex:0,onFocus:function(e){return s(e)},children:[Object(l.jsx)("img",{src:t,style:n,alt:c}),Object(l.jsx)("div",{className:"char__name",children:c})]})},f=n(40),O=n(21),p=(n(102),["id","thumbnail"]),x=function(e,t,n){switch(e){case"waiting":return Object(l.jsx)(O.a,{});case"loading":return n?Object(l.jsx)("ul",{className:"char__grid",children:t}):Object(l.jsx)(O.a,{});case"confirmed":return Object(l.jsx)("ul",{className:"char__grid",children:t});case"error":return Object(l.jsx)(f.a,{});default:throw new Error("Unexpected process state")}},v=function(e){var t=Object(a.useState)([]),n=Object(c.a)(t,2),r=n[0],i=n[1],o=Object(a.useState)(100),u=Object(c.a)(o,2),d=u[0],f=u[1],O=Object(a.useState)(!1),v=Object(c.a)(O,2),_=v[0],g=v[1],N=Object(a.useState)(!1),w=Object(c.a)(N,2),k=w[0],y=w[1],C=Object(a.useRef)([]),S=Object(s.a)(),F=S.getAllCharacters,E=S.process,P=S.setProcess;Object(a.useEffect)((function(){R(d,!0)}),[]);var R=function(e,t){g(!t),F(e).then(I).then((function(){return P("confirmed")}))},I=function(e){e.length<9&&y(!0),i((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),g(!1),f((function(e){return e+9}))},T=e.onCharSelected,q=r.map((function(e,t){var n=e.id,c=e.thumbnail,a=Object(h.a)(e,p),r="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"contain"}:null;return Object(l.jsx)(m,Object(j.a)({onSetRef:function(e){return C.current[t]=e},onCharSelected:function(){return T(n)},imgStyle:r,thumbnail:c,onFocus:function(e){!function(e){C.current.forEach((function(e){e.classList.remove("char__item_selected")})),e.target.classList.add("char__item_selected")}(e),T(n)}},a),n)}));return Object(l.jsxs)("div",{className:"char__list",children:[x(E,q,_),Object(l.jsx)("button",{className:"button button__main button__long",onClick:function(){return R(d)},disabled:_,style:{display:k?"none":"block"},children:Object(l.jsx)("div",{className:"inner",children:"load more"})})]})},_=n(4),g=n.n(_),N=n(7),w=n(11),k=n(215),y=n(216),C=(n(211),function(e){var t=e.char;switch(e.status.status){case"finded":return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"findChar_finded",children:"There is! Visit ".concat(t.name," page?")}),Object(l.jsx)(w.b,{to:"/marvel-test-project/characters/".concat(t.id),className:"button button__secondary",type:"submit",children:Object(l.jsx)("div",{className:"inner",children:"To page"})})]});case"notFinded":return Object(l.jsx)("div",{className:"findChar_notFinded",children:"Oh, sorry, there is no matches with this name in database"});default:return null}}),S=function(){var e=Object(s.a)().findCharacter,t=Object(a.useState)(null),n=Object(c.a)(t,2),r=n[0],i=n[1],o=Object(a.useReducer)((function(e,t){switch(t.type){case"finded":return{status:"finded"};case"notFinded":return{status:"notFinded"};default:return e}}),"empty"),u=Object(c.a)(o,2),d=u[0],h=u[1];var b=function(e){i(e),h({type:"finded"})},m=function(){var t=Object(N.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:(c=t.sent)?b(c):(i(null),h({type:"notFinded"}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=Object(k.a)({initialValues:{name:""},onSubmit:function(e){return m(e.name)},validationSchema:y.a({name:y.b().required("Name is required")})});return Object(l.jsxs)("div",{className:"findChar",onSubmit:f.handleSubmit,children:[Object(l.jsx)("div",{className:"findChar__header",children:"Or find a character by name:"}),Object(l.jsxs)("form",{className:"findChar__form",children:[Object(l.jsx)("input",Object(j.a)({name:"name",type:"text",placeholder:"Enter name"},f.getFieldProps("name"))),Object(l.jsx)("button",{className:"button button__main",type:"submit",children:Object(l.jsx)("div",{className:"inner",children:"Find"})}),f.errors.name&&f.touched.name?Object(l.jsx)("div",{className:"error",children:f.errors.name}):null]}),Object(l.jsx)(C,{char:r,status:d})]})},F=(n(212),function(e){var t=e.data,n=t.name,c=t.description,a=t.thumbnail,r=t.homepage,s=t.wiki,i=t.comics;i.length>10&&(i=i.splice(0,10));var o=i.map((function(e,t){return Object(l.jsx)("li",{className:"char__comics-item",children:e.name},t)}));o=0===o.length?Object(l.jsx)("div",{children:"There's no comics with this character"}):o;var u="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?{objectFit:"contain"}:null;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"char__basics",children:[Object(l.jsx)("img",{style:u,src:a,alt:n}),Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"char__info-name",children:n}),Object(l.jsxs)("div",{className:"char__btns",children:[Object(l.jsx)("a",{href:r,className:"button button__main",children:Object(l.jsx)("div",{className:"inner",children:"homepage"})}),Object(l.jsx)("a",{href:s,className:"button button__secondary",children:Object(l.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(l.jsx)("div",{className:"char__descr",children:c}),Object(l.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(l.jsx)("ul",{className:"char__comics-list",children:o})]})}),E=function(e){var t=Object(a.useState)(null),n=Object(c.a)(t,2),r=n[0],o=n[1],u=Object(s.a)(),d=u.getCharacter,j=u.clearError,h=u.process,b=u.setProcess;Object(a.useEffect)((function(){f()}),[e.charId]);var m=function(e){o(e)},f=function(){e.charId&&(j(),d(e.charId).then(m).then((function(){return b("confirmed")})))};return Object(l.jsxs)("div",{className:"char__wrapper",children:[Object(l.jsx)("div",{className:"char__info",children:Object(i.a)(h,F,r)}),Object(l.jsx)(S,{})]})},P=n(10),R=n(14),I=n(15),T=n(16),q=function(e){Object(I.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(P.a)(this,n);for(var c=arguments.length,a=new Array(c),r=0;r<c;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return Object(R.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 - ".concat(e,", \u0418\u043d\u0444\u043e - ").concat(t)),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(l.jsx)(f.a,{}):this.props.children}}]),n}(a.Component),A=n.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(a.useState)(null),t=Object(c.a)(e,2),n=t[0],s=t[1];return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(r.a,{children:[Object(l.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(l.jsx)("title",{children:"Marvel information portal"})]}),Object(l.jsx)(q,{children:Object(l.jsx)(d,{})}),Object(l.jsxs)("div",{className:"char__content",children:[Object(l.jsx)(q,{children:Object(l.jsx)(v,{onCharSelected:function(e){s(e)}})}),Object(l.jsx)(q,{children:Object(l.jsx)(E,{charId:n})})]}),Object(l.jsx)("img",{className:"bg-decoration",src:A,alt:"vision"})]})}},40:function(e,t,n){"use strict";var c=n.p+"static/media/error.2e68414c.gif",a=n(3);t.a=function(){return Object(a.jsx)("img",{style:{width:200,display:"block",margin:"20px auto 0 auto"},src:c,alt:"error"})}},42:function(e,t,n){"use strict";var c=n(4),a=n.n(c),r=n(7),s=n(5),i=n(0);t.a=function(){var e=function(){var e=Object(i.useState)("waiting"),t=Object(s.a)(e,2),n=t[0],c=t[1];return{request:Object(i.useCallback)(function(){var e=Object(r.a)(a.a.mark((function e(t){var n,r,s,i,o,l=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-type":"application/json"},c("loading"),e.prev=4,e.next=7,fetch(t,{method:n,body:r,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 10:return e.next=12,i.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:throw e.prev=16,e.t0=e.catch(4),c("error"),e.t0;case 20:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[]),clearError:Object(i.useCallback)((function(){c("loading")}),[]),process:n,setProcess:c}}(),t=e.request,n=e.clearError,c=e.process,o=e.setProcess,l="https://gateway.marvel.com:443/v1/public/",u="apikey=21aa5af94424603715dc10109257132d",d=100,j=function(){var e=Object(r.a)(a.a.mark((function e(){var n,c,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:d,e.next=3,t("".concat(l,"characters?limit=9&offset=").concat(n,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(p));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"characters/").concat(n,"?limit=9&offset=210&").concat(u));case 2:return c=e.sent,e.abrupt("return",p(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(a.a.mark((function e(n){var c,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t("".concat(l,"characters?name=").concat(n,"&").concat(u));case 3:if(0!==(c=e.sent).data.results.length){e.next=6;break}throw new Error('There is no "'.concat(n,'" in database'));case 6:r=p(c.data.results[0]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),o("error");case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(a.a.mark((function e(){var n,c,r=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>0&&void 0!==r[0]?r[0]:d,e.next=3,t("".concat(l,"comics?issueNumber=").concat(1,"&orderBy=focDate&limit=").concat(8,"&offset=").concat(n,"&").concat(u));case 3:return c=e.sent,e.abrupt("return",c.data.results.map(O));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t("".concat(l,"comics/").concat(n,"?").concat(u));case 2:return c=e.sent,e.abrupt("return",O(c.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return{id:e.id,name:e.title,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices[0].price,url:e.urls[0].url,description:e.description,pageCount:e.pageCount,language:e.textObjects[0]?e.textObjects[0].language:null}},p=function(e){var t=e.description;return t?t.length>210&&(t="".concat(t.slice(0,207),"...")):t="Ooops..there's no info about this character",{name:e.name,description:t,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,id:e.id,comics:e.comics.items}};return{getAllCharacters:j,getCharacter:h,clearError:n,getAllComics:m,getComic:f,findCharacter:b,process:c,setProcess:o}}},55:function(e,t,n){"use strict";var c=n(40),a=n(21),r=(n(56),n(3)),s=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(r.jsxs)("div",{className:"skeleton",children:[Object(r.jsxs)("div",{className:"pulse skeleton__header",children:[Object(r.jsx)("div",{className:"pulse skeleton__circle"}),Object(r.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(r.jsx)("div",{className:"pulse skeleton__block"}),Object(r.jsx)("div",{className:"pulse skeleton__block"}),Object(r.jsx)("div",{className:"pulse skeleton__block"})]})]})};t.a=function(e,t,n){switch(e){case"waiting":return Object(r.jsx)(s,{});case"loading":return Object(r.jsx)(a.a,{});case"confirmed":return Object(r.jsx)(t,{data:n});case"error":return Object(r.jsx)(c.a,{});default:throw new Error("Unexpected process state")}}},56:function(e,t,n){}}]);
//# sourceMappingURL=5.cec4b0df.chunk.js.map