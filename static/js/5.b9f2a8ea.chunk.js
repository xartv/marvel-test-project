(this.webpackJsonpmarvel=this.webpackJsonpmarvel||[]).push([[5],{100:function(e,t,n){},101:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(0),r=n(47),s=n(41),i=n(21),o=n(42),l=(n(99),n.p+"static/media/mjolnir.61f31e18.png"),u=n(3),j=function(e){var t=e.char,n=t.name,a=t.description,c=t.thumbnail,r=t.homepage,s=t.wiki,i="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"contain"}:null;return Object(u.jsxs)("div",{className:"randomchar__block",children:[Object(u.jsx)("img",{src:c,alt:"Random character",style:i,className:"randomchar__img"}),Object(u.jsxs)("div",{className:"randomchar__info",children:[Object(u.jsx)("p",{className:"randomchar__name",children:n}),Object(u.jsx)("p",{className:"randomchar__descr",children:a}),Object(u.jsxs)("div",{className:"randomchar__btns",children:[Object(u.jsx)("a",{href:r,className:"button button__main",children:Object(u.jsx)("div",{className:"inner",children:"homepage"})}),Object(u.jsx)("a",{href:s,className:"button button__secondary",children:Object(u.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=function(){var e=Object(c.useState)({}),t=Object(a.a)(e,2),n=t[0],r=t[1],d=Object(s.a)(),h=d.loading,b=d.error,m=d.getCharacter,f=d.clearError;Object(c.useEffect)((function(){p()}),[]);var O=function(e){r(e)},p=function(){f();var e=Math.floor(400*Math.random()+1011e3);m(e).then(O)},x=b||h?null:Object(u.jsx)(j,{char:n}),v=h?Object(u.jsx)(i.a,{}):null,_=b?Object(u.jsx)(o.a,{}):null;return Object(u.jsxs)("div",{className:"randomchar",children:[x,v,_,Object(u.jsxs)("div",{className:"randomchar__static",children:[Object(u.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",Object(u.jsx)("br",{}),"Do you want to get to know him better?"]}),Object(u.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),Object(u.jsx)("button",{className:"button button__main",onClick:p,children:Object(u.jsx)("div",{className:"inner",children:"try it"})}),Object(u.jsx)("img",{src:l,alt:"mjolnir",className:"randomchar__decoration"})]})]})},h=n(67),b=n(216),m=n(8),f=function(e){var t=e.thumbnail,n=e.imgStyle,a=e.name,c=e.onCharSelected,r=e.onSetRef,s=e.onFocus;return Object(u.jsxs)("li",{ref:r,className:"char__item",onClick:c,tabIndex:0,onFocus:function(e){return s(e)},children:[Object(u.jsx)("img",{src:t,style:n,alt:a}),Object(u.jsx)("div",{className:"char__name",children:a})]})},O=(n(100),["id","thumbnail"]),p=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),r=n[0],l=n[1],j=Object(c.useState)(100),d=Object(a.a)(j,2),p=d[0],x=d[1],v=Object(c.useState)(!1),_=Object(a.a)(v,2),g=_[0],N=_[1],k=Object(c.useState)(!1),y=Object(a.a)(k,2),w=y[0],C=y[1],S=Object(c.useRef)([]),F=Object(s.a)(),E=F.loading,R=F.error,I=F.getAllCharacters;Object(c.useEffect)((function(){T(p,!0)}),[]);var T=function(e,t){N(!t),I(e).then(q)},q=function(e){e.length<9&&C(!0),l((function(t){return[].concat(Object(m.a)(t),Object(m.a)(e))})),N(!1),x((function(e){return e+9}))},A=e.onCharSelected,M=r.map((function(e,t){var n=e.id,a=e.thumbnail,c=Object(b.a)(e,O),r="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a?{objectFit:"contain"}:null;return Object(u.jsx)(f,Object(h.a)({onSetRef:function(e){return S.current[t]=e},onCharSelected:function(){return A(n)},imgStyle:r,thumbnail:a,onFocus:function(e){!function(e){S.current.forEach((function(e){e.classList.remove("char__item_selected")})),e.target.classList.add("char__item_selected")}(e),A(n)}},c),n)})),D=E&&!g?Object(u.jsx)(i.a,{}):null,J=R?Object(u.jsx)(o.a,{}):null;return Object(u.jsxs)("div",{className:"char__list",children:[J,D,Object(u.jsx)("ul",{className:"char__grid",children:M}),Object(u.jsx)("button",{className:"button button__main button__long",onClick:function(){return T(p)},disabled:g,style:{display:w?"none":"block"},children:Object(u.jsx)("div",{className:"inner",children:"load more"})})]})},x=(n(101),function(){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),Object(u.jsxs)("div",{className:"skeleton",children:[Object(u.jsxs)("div",{className:"pulse skeleton__header",children:[Object(u.jsx)("div",{className:"pulse skeleton__circle"}),Object(u.jsx)("div",{className:"pulse skeleton__mini"})]}),Object(u.jsx)("div",{className:"pulse skeleton__block"}),Object(u.jsx)("div",{className:"pulse skeleton__block"}),Object(u.jsx)("div",{className:"pulse skeleton__block"})]})]})}),v=n(4),_=n.n(v),g=n(7),N=n(11),k=n(214),y=n(215),w=(n(210),function(e){var t=e.char;switch(e.status.status){case"finded":return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"findChar_finded",children:"There is! Visit ".concat(t.name," page?")}),Object(u.jsx)(N.b,{to:"/characters/".concat(t.id),className:"button button__secondary",type:"submit",children:Object(u.jsx)("div",{className:"inner",children:"To page"})})]});case"notFinded":return Object(u.jsx)("div",{className:"findChar_notFinded",children:"Oh, sorry, there is no matches with this name in database"});default:return null}}),C=function(){var e=Object(s.a)().findCharacter,t=Object(c.useState)(null),n=Object(a.a)(t,2),r=n[0],i=n[1],o=Object(c.useReducer)((function(e,t){switch(t.type){case"finded":return{status:"finded"};case"notFinded":return{status:"notFinded"};default:return e}}),"empty"),l=Object(a.a)(o,2),j=l[0],d=l[1];var b=function(e){i(e),d({type:"finded"})},m=function(){var t=Object(g.a)(_.a.mark((function t(n){var a;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(n);case 2:(a=t.sent)?b(a):(i(null),d({type:"notFinded"}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=Object(k.a)({initialValues:{name:""},onSubmit:function(e){return m(e.name)},validationSchema:y.a({name:y.b().required("Name is required")})});return Object(u.jsxs)("div",{className:"findChar",onSubmit:f.handleSubmit,children:[Object(u.jsx)("div",{className:"findChar__header",children:"Or find a character by name:"}),Object(u.jsxs)("form",{className:"findChar__form",children:[Object(u.jsx)("input",Object(h.a)({name:"name",type:"text",placeholder:"Enter name"},f.getFieldProps("name"))),Object(u.jsx)("button",{className:"button button__main",type:"submit",children:Object(u.jsx)("div",{className:"inner",children:"Find"})}),f.errors.name&&f.touched.name?Object(u.jsx)("div",{className:"error",children:f.errors.name}):null]}),Object(u.jsx)(w,{char:r,status:j})]})},S=(n(211),function(e){var t=e.char,n=t.name,a=t.description,c=t.thumbnail,r=t.homepage,s=t.wiki,i=t.comics;i.length>10&&(i=i.splice(0,10));var o=i.map((function(e,t){return Object(u.jsx)("li",{className:"char__comics-item",children:e.name},t)}));o=0===o.length?Object(u.jsx)("div",{children:"There's no comics with this character"}):o;var l="http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"contain"}:null;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"char__basics",children:[Object(u.jsx)("img",{style:l,src:c,alt:n}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:"char__info-name",children:n}),Object(u.jsxs)("div",{className:"char__btns",children:[Object(u.jsx)("a",{href:r,className:"button button__main",children:Object(u.jsx)("div",{className:"inner",children:"homepage"})}),Object(u.jsx)("a",{href:s,className:"button button__secondary",children:Object(u.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),Object(u.jsx)("div",{className:"char__descr",children:a}),Object(u.jsx)("div",{className:"char__comics",children:"Comics:"}),Object(u.jsx)("ul",{className:"char__comics-list",children:o})]})}),F=function(e){var t=Object(c.useState)(null),n=Object(a.a)(t,2),r=n[0],l=n[1],j=Object(s.a)(),d=j.loading,h=j.error,b=j.getCharacter,m=j.clearError;Object(c.useEffect)((function(){O()}),[e.charId]);var f=function(e){l(e)},O=function(){e.charId&&(m(),b(e.charId).then(f))},p=h||d||!r?null:Object(u.jsx)(S,{char:r}),v=d?Object(u.jsx)(i.a,{}):null,_=h?Object(u.jsx)(o.a,{}):null,g=h||d||r?null:Object(u.jsx)(x,{});return Object(u.jsxs)("div",{className:"char__wrapper",children:[Object(u.jsxs)("div",{className:"char__info",children:[p,v,_,g]}),Object(u.jsx)(C,{})]})},E=n(10),R=n(14),I=n(15),T=n(16),q=function(e){Object(I.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,c=new Array(a),r=0;r<a;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={error:!1},e}return Object(R.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 - ".concat(e,", \u0418\u043d\u0444\u043e - ").concat(t)),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(u.jsx)(o.a,{}):this.props.children}}]),n}(c.Component),A=n.p+"static/media/vision.067d4ae1.png";t.default=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],s=t[1];return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(r.a,{children:[Object(u.jsx)("meta",{name:"description",content:"Marvel information portal"}),Object(u.jsx)("title",{children:"Marvel information portal"})]}),Object(u.jsx)(q,{children:Object(u.jsx)(d,{})}),Object(u.jsxs)("div",{className:"char__content",children:[Object(u.jsx)(q,{children:Object(u.jsx)(p,{onCharSelected:function(e){s(e)}})}),Object(u.jsx)(q,{children:Object(u.jsx)(F,{charId:n})})]}),Object(u.jsx)("img",{className:"bg-decoration",src:A,alt:"vision"})]})}},41:function(e,t,n){"use strict";var a=n(4),c=n.n(a),r=n(7),s=n(5),i=n(0);t.a=function(){var e=function(){var e=Object(i.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(i.useState)(!1),l=Object(s.a)(o,2),u=l[0],j=l[1];return{loading:n,request:Object(i.useCallback)(function(){var e=Object(r.a)(c.a.mark((function e(t){var n,r,s,i,o,l=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,s=l.length>3&&void 0!==l[3]?l[3]:{"Content-type":"application/json"},a(!0),e.prev=4,e.next=7,fetch(t,{method:n,body:r,headers:s});case 7:if((i=e.sent).ok){e.next=10;break}throw new Error("Could not fetch ".concat(t,", status: ").concat(i.status));case 10:return e.next=12,i.json();case 12:return o=e.sent,a(!1),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(4),a(!1),j(e.t0.message),e.t0;case 22:case"end":return e.stop()}}),e,null,[[4,17]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:u,clearError:Object(i.useCallback)((function(){return j(null)}),[]),setError:j}}(),t=e.loading,n=e.request,a=e.error,o=e.clearError,l=e.setError,u="https://gateway.marvel.com:443/v1/public/",j="apikey=21aa5af94424603715dc10109257132d",d=100,h=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:d,e.next=3,n("".concat(u,"characters?limit=9&offset=").concat(t,"&").concat(j));case 3:return a=e.sent,e.abrupt("return",a.data.results.map(x));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(u,"characters/").concat(t,"?limit=9&offset=210&").concat(j));case 2:return a=e.sent,e.abrupt("return",x(a.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(r.a)(c.a.mark((function e(t){var a,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("".concat(u,"characters?name=").concat(t,"&").concat(j));case 3:if(0!==(a=e.sent).data.results.length){e.next=6;break}throw new Error('There is no "'.concat(t,'" in database'));case 6:r=x(a.data.results[0]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),l(e.t0.message);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(r.a)(c.a.mark((function e(){var t,a,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:d,e.next=3,n("".concat(u,"comics?issueNumber=").concat(1,"&orderBy=focDate&limit=").concat(8,"&offset=").concat(t,"&").concat(j));case 3:return a=e.sent,e.abrupt("return",a.data.results.map(p));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n("".concat(u,"comics/").concat(t,"?").concat(j));case 2:return a=e.sent,e.abrupt("return",p(a.data.results[0]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return{id:e.id,name:e.title,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices[0].price,url:e.urls[0].url,description:e.description,pageCount:e.pageCount,language:e.textObjects[0]?e.textObjects[0].language:null}},x=function(e){var t=e.description;return t?t.length>210&&(t="".concat(t.slice(0,207),"...")):t="Ooops..there's no info about this character",{name:e.name,description:t,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,id:e.id,comics:e.comics.items}};return{loading:t,error:a,getAllCharacters:h,getCharacter:b,clearError:o,getAllComics:f,getComic:O,findCharacter:m,setError:l}}},42:function(e,t,n){"use strict";var a=n.p+"static/media/error.2e68414c.gif",c=n(3);t.a=function(){return Object(c.jsx)("img",{style:{width:200,display:"block",margin:"20px auto 0 auto"},src:a,alt:"error"})}},99:function(e,t,n){}}]);
//# sourceMappingURL=5.b9f2a8ea.chunk.js.map